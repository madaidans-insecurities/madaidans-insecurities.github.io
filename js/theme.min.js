"use strict";const MEDIA_LIGHT=window.matchMedia("(prefers-color-scheme: light)"),MEDIA_DARK=window.matchMedia("(prefers-color-scheme: dark)"),STORE=localStorage,STORE_KEY="mode";function matchSystem(){MEDIA_LIGHT.matches?STORE.setItem(STORE_KEY,"light"):STORE.setItem(STORE_KEY,"dark")}function disableElement(e){e&&e.setAttribute("disabled","")}function disableStyles(){[document.getElementById("light-theme"),document.getElementById("dark-theme")].forEach(e=>{disableElement(e)})}function addStyle(e,t){return new Promise((s,c)=>{const o=document.createElement("link");o.href=e,o.id=t,o.rel="stylesheet",o.onload=(()=>s(o)),o.onerror=(()=>c(new Error("could not load stylesheet"))),document.head.append(o)})}function switchTheme(e,t,s){const c=document.getElementById(t);e.matches?disableStyles():c?c.removeAttribute("disabled"):addStyle(s,t).catch(e=>{console.error(e)})}function toDark(){switchTheme(MEDIA_DARK,"dark-theme","stylesheets/dark.css")}function toLight(){switchTheme(MEDIA_LIGHT,"light-theme","stylesheets/light.css")}function changeTheme(){switch(STORE.getItem("mode")){case"light":toDark(),STORE.setItem("mode","dark");break;case"dark":toLight(),STORE.setItem("mode","light");break;default:matchSystem()}}window.onstorage=(e=>{if(e.key===STORE_KEY)switch(STORE.getItem(STORE_KEY)){case"light":toLight();break;case"dark":toDark();break;default:matchSystem()}}),MEDIA_LIGHT.onchange=(()=>{disableStyles(),matchSystem()}),(()=>{const e=document.querySelector("button");e&&(e.addEventListener("click",()=>changeTheme()),e.style.visibility="visible"),matchSystem()})();